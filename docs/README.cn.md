
[English](../README.md) | **中文**

# UniGen：一个探索性的自然语言流式编程编译器

**这是一个个人实验项目**，尝试将用户的自然语言意图解析为函数式结构，并组织成可执行的数据流图。项目仍处于早期探索阶段，许多想法尚未验证。

---

## 出发点

在使用 LLM 的过程中，我注意到一个现象：无论用户输入什么，本质上都可以看作一次隐式的"函数调用"——有输入、有期望的输出、有某种处理过程。

这让我想到，如果把用户意图显式地解析为 **Input/Process/Output 三元组**，或许能带来一些好处：

- 结构化的表示便于组合和复用
- 可以接入符号推理系统做长链规划
- 比纯粹的 Chain-of-Thought 更容易验证和调试

这个项目就是对这一想法的探索性实现。

---

## 核心思路

### 函数式意图解析

将任意自然语言输入解析为标准三元组：

```yaml
function: translate_to_chinese
input:
  explicit: [英文文本]
  implicit: {style: formal}
  type: string
process:
  - 理解原文语义
  - 选择正式词汇
  - 生成译文
output:
  expected: 中文译文
  type: string
```

这个结构的设计受到两个经典理论的启发：

**λ 演算**：三元组可以对应 `λ input. process(input) → output`，节点组合对应函数组合。这不是严格的形式化对应，但提供了一个有用的思考框架。

**Prolog**：解析后的三元组可以存为类似 fact 的形式，理论上可以支持 backward chaining 来自动搜索函数链。这部分还只是设想，尚未实现。

### 数据流图

多个节点通过 I/O 类型匹配连接成图，借鉴了 Flow-Based Programming 的思路。与传统 FBP 的区别在于：

- 节点由自然语言描述，而非预定义代码
- LLM 充当"万能函数模拟器"，尝试执行节点描述的任务

需要说明的是，LLM 模拟函数的可靠性高度依赖于任务的明确程度。复杂或模糊的任务容易出错，这也是为什么需要将大任务分解为小的、定义清晰的节点。

### 输出驱动的结构优化（设想）

一个尚未实现的想法：用户提供期望输出或输出约束，系统以此为评价函数，搜索合适的节点组合。这有点类似遗传编程中的 fitness function，但我还不确定这条路能走多远。

---

## 架构草图

```
自然语言输入
      │
      ▼
┌─────────────────┐
│  函数式解析器   │  将输入解析为 I/P/O 三元组
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  图结构组织器   │  根据类型匹配组织节点连接
└────────┬────────┘
         │
    ┌────┴────┐
    ▼         ▼
┌───────┐ ┌───────┐
│ LLM   │ │ 编译  │  混合执行（后者为远期目标）
│ 执行  │ │ 代码  │
└───────┘ └───────┘
```

---

## 一个简单的例子

**用户意图**："读这篇论文，提取要点，写一篇中文介绍"

**可能的分解**：

```
[论文文件] → [提取要点] → [写中文介绍] → [中文文章]
```

每个节点独立定义 I/P/O，可以单独测试。这种分解是否最优、AI 能否自动完成这种分解，都是待验证的问题。

---

## 与相关工作的关系

这个项目受到以下工作的启发：

| 方法 | 我的理解 |
|-----|---------|
| Chain-of-Thought | 关注单次推理的中间步骤，UniGen 尝试做的是跨多次调用的结构化组合 |
| Flow-Based Programming | 成熟的数据流编程范式，UniGen 借用其图结构，但节点定义方式不同 |
| λ 演算 / Prolog | 提供理论视角，但 UniGen 的"对应"目前还很粗糙，不是严格的形式化映射 |

---

## 当前状态与局限

**状态**：概念探索 + 早期原型

**已知局限**：

- 函数式解析的准确性依赖 LLM 能力，复杂意图容易解析错误
- 图结构的自动组织还没有实现，目前需要手动指定
- Prolog 集成只是设想，尚未开始
- 缺乏系统性的评估，不确定这个方向是否真的比现有方法更好

---

## 路线图（暂定）

- [x] 整理核心想法
- [ ] 实现基础的三元组解析
- [ ] 简单的数据流图执行
- [ ] 探索 Prolog 集成的可行性
- [ ] 找一些具体任务做初步评估

---

## 为什么公开这个早期项目

主要是想记录探索过程，也希望能收到反馈和建议。如果你对以下方向有经验，非常欢迎交流：

- 类型系统 / λ 演算的实际应用
- Prolog / 逻辑编程
- Flow-Based Programming 的实践
- LLM 的可靠性工程

---

## 参考资料

这些是影响我思考的一些资料，不代表本项目与它们有正式关联：

- Church, A. (1936). An Unsolvable Problem of Elementary Number Theory.
- Morrison, J.P. (2010). Flow-Based Programming, 2nd Edition.
- Kowalski, R. (1974). Predicate Logic as a Programming Language.
- Wei, J. et al. (2022). Chain-of-Thought Prompting Elicits Reasoning in Large Language Models.

---

## 许可证

MIT License © 2025

---

**UniGen**：一个尝试将自然语言意图结构化、可组合化的个人实验。
